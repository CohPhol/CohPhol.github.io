<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lenticular Animation</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: #222;
      overflow: hidden;
      margin: 0;
    }

    .card {
      display: flex;
      --boards: 16;
      --dimension: calc(var(--boards) * 3px);
      --width: calc(var(--dimension) / var(--boards));
      transform-style: preserve-3d;
      transform: rotateY(var(--angle, -42deg)) rotateX(var(--angle-x, 0.25deg));
      animation: flip 2500ms 0ms infinite alternate ease-in-out;
      list-style: none;
      padding: 0;
    }

    li {
      height: var(--dimension);
      width: var(--width);
      position: relative;
      transform-style: preserve-3d;
    }

    li::before,
    li::after {
      background-repeat: no-repeat;
      background-size: var(--dimension) calc(var(--dimension) * 9 / 16);
      background-position: calc(var(--offset-x, 0) * var(--dimension)) center;
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      transform: rotateY(calc(60deg * var(--direction, -1)));
      transform-origin: var(--origin-x, 100%) 50% 0px;
    }

    li::before {
      background-image: url('./assets/images/2.jpg');
    }

    li::after {
      background-image: url('./assets/images/1.jpg');
      --direction: 1;
      --origin-x: 0%;
    }

    @keyframes flip {
      0% {
        --angle: -42deg;
      }

      100% {
        --angle: 42deg;
      }
    }
  </style>
</head>

<body>
  <ul class="card">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>

  <script>
    let card = document.querySelector('.card');
    let boards = Array.from(card.querySelectorAll('li'));

    // Set CSS variable for the number of boards
    card.style.setProperty('--boards', boards.length);

    // Set background offset for each board
    boards.forEach((board, i) => {
      board.style.setProperty('--offset-x', -i / (boards.length - 1));
    });

    const TOTAL_DEGREES = 84;
    let clientWidth = window.innerWidth;
    let step = TOTAL_DEGREES / clientWidth;

    // Adjust angle on pointer move
    if ('PointerEvent' in window) {
      card.style.animationIterationCount = 2;
      document.body.addEventListener('pointermove', e => {
        card.style.setProperty('--angle', `${-42 + (e.clientX * step)}deg`);
      });
    }

    // Adjust step on resize
    window.addEventListener('resize', () => {
      clientWidth = window.innerWidth;
      step = TOTAL_DEGREES / clientWidth;
    });

    // Device orientation support
    if (window.DeviceOrientationEvent) {
      card.style.animationIterationCount = 2;
      window.addEventListener('deviceorientation', (e) => {
        let amount = (e.gamma / 12);
        card.style.setProperty('--angle', `${-e.gamma}deg`);
      });
    }
  </script>
</body>

</html>